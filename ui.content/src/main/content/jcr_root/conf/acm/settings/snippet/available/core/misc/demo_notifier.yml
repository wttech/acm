group: Misc
name: misc_demo_notifier
content: |
  boolean canRun() {
    return conditions.always()
  }

  void describeRun() {
    arguments.text("message")
    if (notifier.findTeamsDefault().isPresent()) {
      arguments.bool("teams") { value = true; switcher() }
    }
    if (notifier.findSlackDefault().isPresent()) {
      arguments.bool("slack") { value = true; switcher() }
    }
  }
    
  void doRun() {
    if (arguments.value("teams")) {
      def payload = notifier.newTeamsPayload().text(arguments.value("message")).build()
      notifier.teamsDefault.sendPayload(payload)
    }
    if (arguments.value("slack")) {
      def payload = notifier.newSlackPayload().text(arguments.value("message")).build()
      notifier.slackDefault.sendPayload(payload)
    }
  }
documentation: |
  An example of sending a message to Teams and Slack.
